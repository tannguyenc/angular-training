<form class="needs-validation" [formGroup]="taskForm" (ngSubmit)="onSubmit()">
  <div *ngIf="(loading$ | async) === true">
    <div class="field">
      <p-checkbox formControlName="isGoogleTask" [binary]="true" inputId="isGoogleTask" (onChange)="onChangeIsGoogleTask($event)"></p-checkbox>
      <label for="isGoogleTask"> Create for google task</label>
      <small class="p-error block">Due Time isn't support the time that a google task.
      </small>
      <small *ngIf="errorTaskList" class="p-error block">Please choose a task list when creating a google task.
      </small>
    </div>
    <div class="field mt-2">
      <label for="description" class="block">Task List</label>
      <p-dropdown [style]="{'minWidth':'100%','height': '2rem'}" class="p-inputtext-sm w-full" formControlName="googleTaskListId" [options]="(googleTaskList$ | async)!"
      placeholder="Select a Task List" optionLabel="title"
        optionValue="id" [showClear]="true"></p-dropdown>
    </div>
    <div class="field mt-2">
      <label for="name" class="required block">Name</label>
      <input id="name" type="text" aria-describedby="name-help" formControlName="name" required
        class="p-inputtext-sm px w-full" pInputText />
      <!-- <div class="invalid-feedback text-left" *ngIf="f['name'].invalid && (f['name'].dirty || f['name'].touched)">
        <small *ngIf="f['name'].errors && f['name'].errors['required']" id="name-help" class="p-error block">Name is
          required.</small>
      </div> -->
    </div>
    <div class="field p-col-12 p-md-4 grid grid-cols-3 gap-4 mt-2">
      <div class="col-span-2">
        <label class="required block" for="duaDate">Due Date</label>
        <p-calendar inputId="duaDate" formControlName="dueDate" [minDate]="minimumDate" aria-describedby="duaDate-help"
          [showIcon]="true" appendTo="body">
        </p-calendar>
      </div>
      <div *ngIf="showDueTime">
        <label class="required block" for="dueTime">Due Time</label>
        <p-calendar inputId="dueTime" formControlName="dueTime" [timeOnly]="true"></p-calendar>
      </div>
    </div>
    <div class="field mt-2">
      <label for="description" class="block">Description</label>
      <textarea id="nadescriptionme" aria-describedby="description-help" formControlName="description"
        class="p-inputtext-sm w-full" pInputTextarea [rows]="6"></textarea>
    </div>
    <div class="float-right mt-4">
      <button pButton class="mr-2 p-button-sm
      bg-white text-regal-blue border-regal-blue" type="button" label="CANCEL" (click)="cancelAddTask()"></button>
      <button pButton class="submit p-button-sm bg-regal-blue border-regal-blue
      " type="submit" label="SAVE" [disabled]="!taskForm.valid"></button>
    </div>
  </div>
  <div class="h-full flex items-center justify-center">
    <p-progressSpinner *ngIf="(loading$ | async) === false"></p-progressSpinner>
  </div>
</form>
